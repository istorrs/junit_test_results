<!DOCTYPE html>
<html>
<head>
    <title>API Test</title>
</head>
<body>
    <h1>API Client Test</h1>
    <div id="output"></div>
    <button onclick="testAPI()">Test API</button>

    <script src="api-client.js"></script>
    <script>
        const output = document.getElementById('output');

        function log(message) {
            console.log(message);
            output.innerHTML += '<div>' + JSON.stringify(message) + '</div>';
        }

        async function testAPI() {
            try {
                log('Creating API client...');
                const client = new JUnitAPIClient();

                log('API Base URL: ' + client.baseURL);

                log('Testing health check...');
                const healthy = await client.healthCheck();
                log('Health check result: ' + healthy);

                log('Initializing database...');
                await client.initializeDatabase();
                log('Database initialized!');

                log('Getting test statistics...');
                const stats = await client.getTestStatistics();
                log('Statistics: ' + JSON.stringify(stats, null, 2));

                log('Getting test runs...');
                const runs = await client.getTestRuns(5);
                log('Test runs count: ' + runs.length);
                log('First run: ' + JSON.stringify(runs[0], null, 2));

                log('SUCCESS! API client is working correctly.');
            } catch (error) {
                log('ERROR: ' + error.message);
                log('Error stack: ' + error.stack);
            }
        }

        // Auto-run test on page load
        window.addEventListener('load', testAPI);
    </script>
</body>
</html>
