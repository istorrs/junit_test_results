import{d as S,r as n,o as w,b as o,h as e,l as _,i as b,g as f,t,e as r,q as R,v as F,F as y,j as x,k as h,_ as V}from"./index-DHPa7hmi.js";import{a as k}from"./client-Sj3kfRWu.js";import{C as m}from"./Card-C-_JC3MM.js";const $={class:"releases-view"},B={class:"release-selectors"},M={class:"selector-group"},P=["value"],D={class:"selector-group"},N=["value"],A=["disabled"],U={key:0,class:"comparison-results"},j={class:"metrics-grid"},q={class:"metrics"},z={class:"metric"},E={class:"metric-value"},I={class:"metric"},L={class:"metric-value success"},G={class:"metric"},H={class:"metric-value error"},J={class:"metric"},K={class:"metric-value"},O={class:"metrics"},Q={class:"metric"},W={class:"metric-value"},X={class:"metric"},Y={class:"metric-value success"},Z={class:"metric"},ee={class:"metric-value error"},se={class:"metric"},ae={class:"metric-value"},te={class:"diff-metrics"},le={class:"diff-item"},ie={class:"diff-item"},oe={class:"diff-value"},re={class:"diff-item"},ne={class:"diff-item"},de={key:1,class:"error-message"},ue=S({__name:"Releases",setup(ce){const p=n([]),d=n(""),u=n(""),a=n(null),v=n(!1),c=n("");w(async()=>{try{const i=await k.getReleases({limit:100});p.value=i.releases}catch(i){c.value="Failed to load releases",console.error(i)}});const T=async()=>{if(!(!d.value||!u.value)){v.value=!0,c.value="",a.value=null;try{a.value=await k.compareReleases(d.value,u.value)}catch(i){c.value="Failed to compare releases",console.error(i)}finally{v.value=!1}}},C=i=>{if(i<60)return`${i.toFixed(1)}s`;const s=Math.floor(i/60),l=Math.round(i%60);return`${s}m ${l}s`},g=i=>i>0?"positive":i<0?"negative":"";return(i,s)=>(r(),o("div",$,[s[18]||(s[18]=e("div",{class:"page-header"},[e("h1",null,"Release Comparison"),e("p",{class:"subtitle"},"Compare test results across different releases and versions")],-1)),_(m,{title:"Select Releases to Compare"},{default:f(()=>[e("div",B,[e("div",M,[s[3]||(s[3]=e("label",null,"Release 1 (Baseline)",-1)),R(e("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>d.value=l),class:"release-select"},[s[2]||(s[2]=e("option",{value:""},"Select a release...",-1)),(r(!0),o(y,null,x(p.value,l=>(r(),o("option",{key:l.release_tag,value:l.release_tag},t(l.release_tag)+" "+t(l.release_version?`(${l.release_version})`:""),9,P))),128))],512),[[F,d.value]])]),e("div",D,[s[5]||(s[5]=e("label",null,"Release 2 (Compare to)",-1)),R(e("select",{"onUpdate:modelValue":s[1]||(s[1]=l=>u.value=l),class:"release-select"},[s[4]||(s[4]=e("option",{value:""},"Select a release...",-1)),(r(!0),o(y,null,x(p.value,l=>(r(),o("option",{key:l.release_tag,value:l.release_tag},t(l.release_tag)+" "+t(l.release_version?`(${l.release_version})`:""),9,N))),128))],512),[[F,u.value]])]),e("button",{onClick:T,disabled:!d.value||!u.value||v.value,class:"compare-button"},t(v.value?"Comparing...":"Compare"),9,A)])]),_:1}),a.value?(r(),o("div",U,[e("div",j,[_(m,{title:"Release 1: {{ comparison.release1.tag }}"},{default:f(()=>[e("div",q,[e("div",z,[s[6]||(s[6]=e("span",{class:"metric-label"},"Total Tests",-1)),e("span",E,t(a.value.release1.total_tests),1)]),e("div",I,[s[7]||(s[7]=e("span",{class:"metric-label"},"Pass Rate",-1)),e("span",L,t(a.value.release1.pass_rate.toFixed(1))+"%",1)]),e("div",G,[s[8]||(s[8]=e("span",{class:"metric-label"},"Failures",-1)),e("span",H,t(a.value.release1.total_failures),1)]),e("div",J,[s[9]||(s[9]=e("span",{class:"metric-label"},"Avg Time",-1)),e("span",K,t(C(a.value.release1.avg_time_per_run)),1)])])]),_:1}),_(m,{title:"Release 2: {{ comparison.release2.tag }}"},{default:f(()=>[e("div",O,[e("div",Q,[s[10]||(s[10]=e("span",{class:"metric-label"},"Total Tests",-1)),e("span",W,t(a.value.release2.total_tests),1)]),e("div",X,[s[11]||(s[11]=e("span",{class:"metric-label"},"Pass Rate",-1)),e("span",Y,t(a.value.release2.pass_rate.toFixed(1))+"%",1)]),e("div",Z,[s[12]||(s[12]=e("span",{class:"metric-label"},"Failures",-1)),e("span",ee,t(a.value.release2.total_failures),1)]),e("div",se,[s[13]||(s[13]=e("span",{class:"metric-label"},"Avg Time",-1)),e("span",ae,t(C(a.value.release2.avg_time_per_run)),1)])])]),_:1})]),_(m,{title:"Comparison Summary"},{default:f(()=>[e("div",te,[e("div",le,[s[14]||(s[14]=e("span",{class:"diff-label"},"Pass Rate Change",-1)),e("span",{class:h(["diff-value",g(a.value.diff.pass_rate_change)])},t(a.value.diff.pass_rate_change>0?"+":"")+t(a.value.diff.pass_rate_change.toFixed(2))+"% ",3)]),e("div",ie,[s[15]||(s[15]=e("span",{class:"diff-label"},"Test Count Change",-1)),e("span",oe,t(a.value.diff.test_count_change>0?"+":"")+t(a.value.diff.test_count_change),1)]),e("div",re,[s[16]||(s[16]=e("span",{class:"diff-label"},"Failure Change",-1)),e("span",{class:h(["diff-value",g(-a.value.diff.failure_change)])},t(a.value.diff.failure_change>0?"+":"")+t(a.value.diff.failure_change),3)]),e("div",ne,[s[17]||(s[17]=e("span",{class:"diff-label"},"Performance Change",-1)),e("span",{class:h(["diff-value",g(-a.value.diff.time_change_percent)])},t(a.value.diff.time_change_percent>0?"+":"")+t(a.value.diff.time_change_percent.toFixed(1))+"% ",3)])])]),_:1})])):b("",!0),c.value?(r(),o("div",de,t(c.value),1)):b("",!0)]))}}),me=V(ue,[["__scopeId","data-v-cca01968"]]);export{me as default};
