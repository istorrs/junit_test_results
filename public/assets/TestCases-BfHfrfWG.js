import{d as x,r as f,c as _,o as B,b as n,f as t,g as p,h as r,u as m,x as q,e as l,i as g,t as o,k as v,m as N,p as C,v as b,F as A,q as L,j as E,_ as I}from"./index-BzjzKOz-.js";import{u as R,B as y,a as U,t as z,g as M}from"./Button-U4xe4rWj.js";import{D as $,S as j}from"./SearchInput-BDKhfDhQ.js";const P={class:"test-cases"},Q={class:"page-header"},G={class:"header-actions"},H={class:"filters-grid"},J={class:"filter-group"},K={class:"filter-group"},O={class:"filter-group"},W=["value"],X={class:"filter-group align-end"},Y={class:"test-name"},Z={key:0,class:"test-meta"},w={key:0,class:"meta-info"},ee={key:1,class:"meta-info suite"},se={key:1,class:"error-preview"},te={class:"duration"},ae=x({__name:"TestCases",setup(le){const k=q(),c=R(),u=f(""),i=f(""),d=f(""),V=[{key:"status",label:"Status",sortable:!0},{key:"name",label:"Test Name",sortable:!0},{key:"time",label:"Duration",sortable:!0}],T=_(()=>{const a=new Set;return c.cases.forEach(e=>{e.suite_name&&a.add(e.suite_name)}),Array.from(a).sort()}),D=_(()=>{let a=[...c.cases];if(u.value){const e=u.value.toLowerCase();a=a.filter(s=>s.name?.toLowerCase().includes(e)||s.classname?.toLowerCase().includes(e))}return i.value&&(a=a.filter(e=>e.status===i.value)),d.value&&(a=a.filter(e=>e.suite_name===d.value)),a}),h=_(()=>!!(u.value||i.value||d.value)),F=()=>{u.value="",i.value="",d.value=""},S=async()=>{try{const a=k.query.run_id?{run_id:k.query.run_id}:{};await c.fetchCases(a)}catch(a){console.error("Failed to load test cases:",a)}};return B(()=>{S()}),(a,e)=>(l(),n("div",P,[t("div",Q,[e[6]||(e[6]=t("h1",null,"Test Cases",-1)),t("div",G,[p(y,{onClick:S,loading:m(c).loading,variant:"secondary"},{default:r(()=>[...e[4]||(e[4]=[g(" Refresh ",-1)])]),_:1},8,["loading"]),p(y,{onClick:e[0]||(e[0]=s=>a.$router.push("/runs"))},{default:r(()=>[...e[5]||(e[5]=[g(" View Test Runs ",-1)])]),_:1})])]),p($,{columns:V,data:D.value,loading:m(c).loading},{filters:r(()=>[t("div",H,[t("div",J,[e[7]||(e[7]=t("label",null,"Search",-1)),p(j,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),placeholder:"Search test names..."},null,8,["modelValue"])]),t("div",K,[e[9]||(e[9]=t("label",null,"Status",-1)),C(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>i.value=s),class:"filter-select"},[...e[8]||(e[8]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"passed"},"✓ Passed",-1),t("option",{value:"failed"},"✗ Failed",-1),t("option",{value:"error"},"⚠ Error",-1),t("option",{value:"skipped"},"⊘ Skipped",-1)])],512),[[b,i.value]])]),t("div",O,[e[11]||(e[11]=t("label",null,"Suite",-1)),C(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>d.value=s),class:"filter-select"},[e[10]||(e[10]=t("option",{value:""},"All Suites",-1)),(l(!0),n(A,null,L(T.value,s=>(l(),n("option",{key:s,value:s},o(s),9,W))),128))],512),[[b,d.value]])]),t("div",X,[h.value?(l(),E(y,{key:0,onClick:F,variant:"secondary",size:"sm"},{default:r(()=>[...e[12]||(e[12]=[g(" Clear Filters ",-1)])]),_:1})):v("",!0)])])]),"cell-status":r(({row:s})=>[t("span",{class:N(["status-badge",s.status])},o(m(M)(s.status||""))+" "+o(s.status),3)]),"cell-name":r(({row:s})=>[t("div",Y,[t("strong",null,o(s.name),1),s.classname||s.suite_name?(l(),n("div",Z,[s.classname?(l(),n("span",w,o(s.classname),1)):v("",!0),s.suite_name?(l(),n("span",ee,o(s.suite_name),1)):v("",!0)])):v("",!0),s.error_message?(l(),n("div",se,o(m(z)(s.error_message||"",100)),1)):v("",!0)])]),"cell-time":r(({value:s})=>[t("span",te,o(m(U)((s||0)*1e3)),1)]),_:1},8,["data","loading"])]))}}),ue=I(ae,[["__scopeId","data-v-5c077ab0"]]);export{ue as default};
