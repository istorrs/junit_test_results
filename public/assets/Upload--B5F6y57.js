import{d as M,r as f,b as F,h as t,l as s,g as l,e as S,i as V,p as a,t as v,m,u as E,_ as I}from"./index-DxqKypvE.js";import{u as N,B as n,d as R}from"./Button-DYZUHkgd.js";import{C as T}from"./Card-DZF6r0ez.js";import{M as _}from"./Modal-OtR8tMt6.js";const z={class:"upload"},D={class:"upload-area"},J={class:"upload-content"},L={key:0,class:"selected-file"},P={class:"error-content"},X=M({__name:"Upload",setup(Y){const U=E(),p=N(),r=f(null),o=f(null),d=f(!1),u=f(null),b=()=>{r.value?.click()},x=i=>{const c=i.target.files;if(c&&c.length>0){const y=c[0];y&&(o.value=y)}},g=()=>{o.value=null,r.value&&(r.value.value="")},w=async()=>{const i=o.value;if(i){u.value=null;try{await p.uploadFile(i),d.value=!0,g()}catch(e){u.value=e instanceof Error?e.message:"Failed to upload file. Please try again."}}},B=()=>{d.value=!1,U.push("/")},C=()=>{d.value=!1},k=()=>{u.value=null};return(i,e)=>(S(),F("div",z,[e[11]||(e[11]=t("h1",null,"Upload Test Results",-1)),s(T,null,{footer:l(()=>[s(n,{onClick:g,variant:"secondary",disabled:!o.value},{default:l(()=>[...e[5]||(e[5]=[a(" Clear ",-1)])]),_:1},8,["disabled"]),s(n,{onClick:w,loading:m(p).loading,disabled:!o.value||m(p).loading},{default:l(()=>[...e[6]||(e[6]=[a(" Upload ",-1)])]),_:1},8,["loading","disabled"])]),default:l(()=>[t("div",D,[t("input",{ref_key:"fileInput",ref:r,type:"file",accept:".xml",onChange:x,class:"file-input"},null,544),t("div",J,[e[1]||(e[1]=t("div",{class:"upload-icon"},"ðŸ“",-1)),e[2]||(e[2]=t("h3",null,"Upload JUnit XML File",-1)),e[3]||(e[3]=t("p",null,"Click or drag and drop your test results file",-1)),s(n,{onClick:b},{default:l(()=>[...e[0]||(e[0]=[a("Select File",-1)])]),_:1})]),o.value?(S(),F("div",L,[e[4]||(e[4]=t("strong",null,"Selected:",-1)),a(" "+v(o.value.name)+" ("+v(m(R)(o.value.size))+") ",1)])):V("",!0)])]),_:1}),s(_,{open:d.value,onClose:C,title:"Upload Successful"},{footer:l(()=>[s(n,{onClick:B,variant:"success"},{default:l(()=>[...e[7]||(e[7]=[a("View Results",-1)])]),_:1}),s(n,{onClick:C,variant:"secondary"},{default:l(()=>[...e[8]||(e[8]=[a("Close",-1)])]),_:1})]),default:l(()=>[e[9]||(e[9]=t("p",null,"Your test results have been uploaded successfully!",-1))]),_:1},8,["open"]),s(_,{open:!!u.value,onClose:k,title:"Upload Failed"},{footer:l(()=>[s(n,{onClick:k,variant:"danger"},{default:l(()=>[...e[10]||(e[10]=[a("Close",-1)])]),_:1})]),default:l(()=>[t("div",P,[t("p",null,v(u.value),1)])]),_:1},8,["open"])]))}}),H=I(X,[["__scopeId","data-v-1ea78228"]]);export{H as default};
