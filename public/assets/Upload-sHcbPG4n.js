import{d as M,e as O,w as V,j as x,g as s,T as E,h as o,z as N,b as r,c as v,k as y,f as l,t as g,y as U,A as R,m as D,_ as T,r as k,i as u,u as S,l as j}from"./index-DoDLnzXg.js";import{u as A,B as p,c as J}from"./Button-GtyLz5Q5.js";import{C as L}from"./Card-BsXF8EP6.js";const P={class:"modal-header"},X={key:0,class:"modal-title"},Y={class:"modal-body"},q={key:0,class:"modal-footer"},G=M({__name:"Modal",props:{open:{type:Boolean},title:{default:void 0},size:{default:"md"},closeOnOverlay:{type:Boolean,default:!0},hideClose:{type:Boolean,default:!1}},emits:["close"],setup(c,{emit:_}){const a=c,f=_,t=O(()=>["modal-content",`modal-${a.size}`]),n=()=>{f("close")},d=()=>{a.closeOnOverlay&&n()};return V(()=>a.open,i=>{i?document.body.style.overflow="hidden":document.body.style.overflow=""}),(i,C)=>(r(),x(N,{to:"body"},[s(E,{name:"modal-fade"},{default:o(()=>[c.open?(r(),v("div",{key:0,class:"modal-overlay",onClick:d},[l("div",{class:D(t.value),onClick:C[0]||(C[0]=R(()=>{},["stop"]))},[l("div",P,[c.title?(r(),v("h3",X,g(c.title),1)):y("",!0),c.hideClose?y("",!0):(r(),v("button",{key:1,class:"modal-close",onClick:n},"Ã—"))]),l("div",Y,[U(i.$slots,"default",{},void 0,!0)]),i.$slots.footer?(r(),v("div",q,[U(i.$slots,"footer",{},void 0,!0)])):y("",!0)],2)])):y("",!0)]),_:3})]))}}),z=T(G,[["__scopeId","data-v-92a48c28"]]),H={class:"upload"},K={class:"upload-area"},Q={class:"upload-content"},W={key:0,class:"selected-file"},Z={class:"error-content"},ee=M({__name:"Upload",setup(c){const _=j(),a=A(),f=k(null),t=k(null),n=k(!1),d=k(null),i=()=>{f.value?.click()},C=m=>{const b=m.target.files;if(b&&b.length>0){const $=b[0];$&&(t.value=$)}},w=()=>{t.value=null,f.value&&(f.value.value="")},h=async()=>{const m=t.value;if(m){d.value=null;try{await a.uploadFile(m),n.value=!0,w()}catch(e){d.value=e instanceof Error?e.message:"Failed to upload file. Please try again."}}},I=()=>{n.value=!1,_.push("/")},F=()=>{n.value=!1},B=()=>{d.value=null};return(m,e)=>(r(),v("div",H,[e[11]||(e[11]=l("h1",null,"Upload Test Results",-1)),s(L,null,{footer:o(()=>[s(p,{onClick:w,variant:"secondary",disabled:!t.value},{default:o(()=>[...e[5]||(e[5]=[u(" Clear ",-1)])]),_:1},8,["disabled"]),s(p,{onClick:h,loading:S(a).loading,disabled:!t.value||S(a).loading},{default:o(()=>[...e[6]||(e[6]=[u(" Upload ",-1)])]),_:1},8,["loading","disabled"])]),default:o(()=>[l("div",K,[l("input",{ref_key:"fileInput",ref:f,type:"file",accept:".xml",onChange:C,class:"file-input"},null,544),l("div",Q,[e[1]||(e[1]=l("div",{class:"upload-icon"},"ðŸ“",-1)),e[2]||(e[2]=l("h3",null,"Upload JUnit XML File",-1)),e[3]||(e[3]=l("p",null,"Click or drag and drop your test results file",-1)),s(p,{onClick:i},{default:o(()=>[...e[0]||(e[0]=[u("Select File",-1)])]),_:1})]),t.value?(r(),v("div",W,[e[4]||(e[4]=l("strong",null,"Selected:",-1)),u(" "+g(t.value.name)+" ("+g(S(J)(t.value.size))+") ",1)])):y("",!0)])]),_:1}),s(z,{open:n.value,onClose:F,title:"Upload Successful"},{footer:o(()=>[s(p,{onClick:I,variant:"success"},{default:o(()=>[...e[7]||(e[7]=[u("View Results",-1)])]),_:1}),s(p,{onClick:F,variant:"secondary"},{default:o(()=>[...e[8]||(e[8]=[u("Close",-1)])]),_:1})]),default:o(()=>[e[9]||(e[9]=l("p",null,"Your test results have been uploaded successfully!",-1))]),_:1},8,["open"]),s(z,{open:!!d.value,onClose:B,title:"Upload Failed"},{footer:o(()=>[s(p,{onClick:B,variant:"danger"},{default:o(()=>[...e[10]||(e[10]=[u("Close",-1)])]),_:1})]),default:o(()=>[l("div",Z,[l("p",null,g(d.value),1)])]),_:1},8,["open"])]))}}),se=T(ee,[["__scopeId","data-v-04dbedc9"]]);export{se as default};
