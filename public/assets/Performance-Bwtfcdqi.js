import{d as F,r as d,o as L,b as a,h as e,l as p,g,t as l,e as n,q as R,v as C,F as f,j as y,k as S,i as T,_ as A}from"./index-DHPa7hmi.js";import{C as b}from"./Card-C-_JC3MM.js";import{a as P}from"./client-Sj3kfRWu.js";const N={class:"performance-view"},V={class:"filters"},M={class:"filter-group"},$={class:"filter-group"},B={class:"filter-group"},U={key:0,class:"loading-state"},z={key:1,class:"error-state"},E={class:"error-message"},I={key:2,class:"performance-data"},j={class:"stats-grid"},q={class:"stat-large"},O={class:"stat-value"},G={class:"stat-large"},H={class:"stat-value regressions"},J={class:"stat-label"},K={class:"tabs"},Q=["onClick"],W={class:"tab-content"},X={key:0,class:"test-list"},Y={key:0,class:"empty-state"},Z={key:1,class:"performance-table"},ee={class:"test-name"},se={class:"class-name"},te={class:"time-value"},le={class:"time-value"},ae={class:"time-value"},ne={class:"time-value"},oe={class:"runs-count"},ie={key:1,class:"test-list"},re={key:0,class:"empty-state"},de={key:1,class:"performance-table"},ue={class:"test-name"},ce={class:"class-name"},ve={class:"time-value"},me={class:"time-value recent"},_e={class:"time-value increase"},he={class:"percent-change"},pe={class:"badge badge-warning"},ge={class:"runs-count"},fe={key:2,class:"trends-content"},ye={key:0,class:"trends-list"},Te={class:"trends-table"},be={class:"time-value"},we={class:"time-value"},ke={class:"time-value"},Re=F({__name:"Performance",setup(Ce){const w=d(!1),v=d(""),c=d("slowest"),i=d({days:30,threshold:20,limit:20}),m=d([]),_=d([]),k=d([]),D=[{id:"slowest",label:"Slowest Tests"},{id:"regressions",label:"Performance Regressions"},{id:"trends",label:"Trends Over Time"}],r=o=>{if(o<1)return`${(o*1e3).toFixed(0)}ms`;if(o<60)return`${o.toFixed(2)}s`;const s=Math.floor(o/60),t=o%60;return`${s}m ${t.toFixed(0)}s`},x=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),h=async()=>{w.value=!0,v.value="";try{const o=await P.getSlowestTests({limit:i.value.limit,days:i.value.days});m.value=o.slowest_tests;const s=await P.getPerformanceRegressions({days:i.value.days,threshold_percent:i.value.threshold});_.value=s.regressions;const t=await P.getPerformanceTrends({days:i.value.days,granularity:"daily"});k.value=t.trends.slice(0,10)}catch(o){v.value=o instanceof Error?o.message:"Failed to load performance data",console.error("Error loading performance data:",o)}finally{w.value=!1}};return L(()=>{h()}),(o,s)=>(n(),a("div",N,[s[16]||(s[16]=e("div",{class:"page-header"},[e("h1",null,"Performance Trends"),e("p",{class:"subtitle"},"Track test execution times and detect performance regressions")],-1)),p(b,{title:"Filters"},{default:g(()=>[e("div",V,[e("div",M,[s[4]||(s[4]=e("label",{for:"days"},"Time Range",-1)),R(e("select",{id:"days","onUpdate:modelValue":s[0]||(s[0]=t=>i.value.days=t),onChange:h},[...s[3]||(s[3]=[e("option",{value:7},"Last 7 Days",-1),e("option",{value:14},"Last 14 Days",-1),e("option",{value:30},"Last 30 Days",-1),e("option",{value:60},"Last 60 Days",-1),e("option",{value:90},"Last 90 Days",-1)])],544),[[C,i.value.days]])]),e("div",$,[s[6]||(s[6]=e("label",{for:"threshold"},"Regression Threshold",-1)),R(e("select",{id:"threshold","onUpdate:modelValue":s[1]||(s[1]=t=>i.value.threshold=t),onChange:h},[...s[5]||(s[5]=[e("option",{value:10},"10% slower",-1),e("option",{value:20},"20% slower",-1),e("option",{value:30},"30% slower",-1),e("option",{value:50},"50% slower",-1)])],544),[[C,i.value.threshold]])]),e("div",B,[s[8]||(s[8]=e("label",{for:"limit"},"Results Limit",-1)),R(e("select",{id:"limit","onUpdate:modelValue":s[2]||(s[2]=t=>i.value.limit=t),onChange:h},[...s[7]||(s[7]=[e("option",{value:10},"Top 10",-1),e("option",{value:20},"Top 20",-1),e("option",{value:50},"Top 50",-1),e("option",{value:100},"Top 100",-1)])],544),[[C,i.value.limit]])])])]),_:1}),w.value?(n(),a("div",U,[...s[9]||(s[9]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading performance data...",-1)])])):v.value?(n(),a("div",z,[e("p",E,l(v.value),1)])):(n(),a("div",I,[e("div",j,[p(b,{title:"Slowest Tests"},{default:g(()=>[e("div",q,[e("div",O,l(m.value.length),1),s[10]||(s[10]=e("div",{class:"stat-label"},"Tests Analyzed",-1))])]),_:1}),p(b,{title:"Regressions Detected"},{default:g(()=>[e("div",G,[e("div",H,l(_.value.length),1),e("div",J,l(i.value.threshold)+"% Threshold",1)])]),_:1})]),p(b,null,{default:g(()=>[e("div",K,[(n(),a(f,null,y(D,t=>e("button",{key:t.id,class:S(["tab",{active:c.value===t.id}]),onClick:u=>c.value=t.id},l(t.label),11,Q)),64))]),e("div",W,[c.value==="slowest"?(n(),a("div",X,[m.value.length===0?(n(),a("div",Y," No test data available for the selected time range ")):(n(),a("div",Z,[e("table",null,[s[11]||(s[11]=e("thead",null,[e("tr",null,[e("th",null,"Test Name"),e("th",null,"Class"),e("th",null,"Avg Time"),e("th",null,"Max Time"),e("th",null,"Min Time"),e("th",null,"P95 Time"),e("th",null,"Runs")])],-1)),e("tbody",null,[(n(!0),a(f,null,y(m.value,(t,u)=>(n(),a("tr",{key:u},[e("td",ee,l(t.test_name),1),e("td",se,l(t.class_name),1),e("td",te,l(r(t.avg_time)),1),e("td",le,l(r(t.max_time)),1),e("td",ae,l(r(t.min_time)),1),e("td",ne,l(r(t.p95_time)),1),e("td",oe,l(t.total_runs),1)]))),128))])])]))])):T("",!0),c.value==="regressions"?(n(),a("div",ie,[_.value.length===0?(n(),a("div",re," No performance regressions detected for the selected threshold ")):(n(),a("div",de,[e("table",null,[s[12]||(s[12]=e("thead",null,[e("tr",null,[e("th",null,"Test Name"),e("th",null,"Class"),e("th",null,"Baseline Avg"),e("th",null,"Recent Avg"),e("th",null,"Increase"),e("th",null,"% Change"),e("th",null,"Recent Runs")])],-1)),e("tbody",null,[(n(!0),a(f,null,y(_.value,(t,u)=>(n(),a("tr",{key:u},[e("td",ue,l(t.test_name),1),e("td",ce,l(t.class_name),1),e("td",ve,l(r(t.baseline_avg)),1),e("td",me,l(r(t.recent_avg)),1),e("td",_e,"+"+l(r(t.time_increase)),1),e("td",he,[e("span",pe,"+"+l(t.percent_increase.toFixed(1))+"%",1)]),e("td",ge,l(t.recent_count),1)]))),128))])])]))])):T("",!0),c.value==="trends"?(n(),a("div",fe,[s[15]||(s[15]=e("div",{class:"info-message"},[e("p",null,[e("strong",null,"Performance Trends Visualization")]),e("p",null," Time-series charts showing test execution trends over time will be displayed here. This feature will include: "),e("ul",null,[e("li",null,"Interactive line charts for individual test performance"),e("li",null,"Aggregated trend views by test suite or class"),e("li",null,"Configurable time granularity (hourly, daily, weekly)"),e("li",null,"Anomaly detection and highlighting")]),e("p",null,' For now, you can view detailed performance data in the "Slowest Tests" and "Performance Regressions" tabs. ')],-1)),k.value.length>0?(n(),a("div",ye,[s[14]||(s[14]=e("h3",null,"Recent Performance Data Points",-1)),e("div",Te,[e("table",null,[s[13]||(s[13]=e("thead",null,[e("tr",null,[e("th",null,"Period"),e("th",null,"Avg Time"),e("th",null,"P50 Time"),e("th",null,"P95 Time"),e("th",null,"Total Runs"),e("th",null,"Pass Rate")])],-1)),e("tbody",null,[(n(!0),a(f,null,y(k.value,(t,u)=>(n(),a("tr",{key:u},[e("td",null,l(x(t.period)),1),e("td",be,l(r(t.avg_time)),1),e("td",we,l(r(t.p50_time)),1),e("td",ke,l(r(t.p95_time)),1),e("td",null,l(t.total_runs),1),e("td",null,l(t.pass_rate.toFixed(2))+"%",1)]))),128))])])])])):T("",!0)])):T("",!0)])]),_:1})]))]))}}),Fe=A(Re,[["__scopeId","data-v-05791890"]]);export{Fe as default};
