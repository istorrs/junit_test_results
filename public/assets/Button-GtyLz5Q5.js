import{B as j,r as i,e as f,d as k,c as v,m as C,k as F,y as D,b as p,_ as E}from"./index-DoDLnzXg.js";class q{baseUrl="/api/v1";async request(e,a){const n=`${this.baseUrl}${e}`,r=await fetch(n,a);if(!r.ok)throw new Error(`Failed to ${a?.method||"GET"} ${e}: ${r.status}`);return(await r.json()).data}buildQueryString(e){const a=Object.fromEntries(Object.entries(e).filter(([,r])=>r!=null));return Object.keys(a).length===0?"":`?${new URLSearchParams(a).toString()}`}async getRuns(e={}){const a={page:e.page||1,limit:e.limit||50,...e},n=this.buildQueryString(a);return this.request(`/runs${n}`)}async getProjects(){return(await this.request("/runs/projects")).projects}async getStats(e={}){const a=this.buildQueryString(e);return this.request(`/stats/overview${a}`)}async getTestCases(e={}){const a={page:e.page||1,limit:e.limit||50,...e},n=this.buildQueryString(a);return this.request(`/cases${n}`)}async uploadTestResults(e){const a=new FormData;a.append("file",e);const n=await fetch(`${this.baseUrl}/upload`,{method:"POST",body:a});if(!n.ok)throw new Error(`Failed to upload test results: ${n.status}`);return(await n.json()).data}}const c=new q,P=j("testData",()=>{const t=i([]),e=i(null),a=i([]),n=i(null),r=i([]),l=i(!1),o=i(null),d=f(()=>t.value.length>0||a.value.length>0),m=f(()=>t.value.length>0?t.value[0]:null);async function y(){l.value=!0,o.value=null;try{r.value=await c.getProjects()}catch(u){throw o.value=u instanceof Error?u.message:"Failed to fetch projects",u}finally{l.value=!1}}async function h(u={}){l.value=!0,o.value=null;try{const s=await c.getRuns(u);return t.value=s.runs,s}catch(s){throw o.value=s instanceof Error?s.message:"Failed to fetch test runs",s}finally{l.value=!1}}async function w(u={}){l.value=!0,o.value=null;try{const s=await c.getTestCases(u);return a.value=s.cases,s}catch(s){throw o.value=s instanceof Error?s.message:"Failed to fetch test cases",s}finally{l.value=!1}}async function g(u={}){l.value=!0,o.value=null;try{return n.value=await c.getStats(u),n.value}catch(s){throw o.value=s instanceof Error?s.message:"Failed to fetch statistics",s}finally{l.value=!1}}async function b(u){l.value=!0,o.value=null;try{const s=await c.uploadTestResults(u);return await Promise.all([h(),g()]),s}catch(s){throw o.value=s instanceof Error?s.message:"Failed to upload file",s}finally{l.value=!1}}function S(u){e.value=u}function $(){o.value=null}function B(){t.value=[],e.value=null,a.value=[],n.value=null,r.value=[],l.value=!1,o.value=null}return{runs:t,currentRun:e,cases:a,stats:n,projects:r,loading:l,error:o,hasData:d,latestRun:m,fetchProjects:y,fetchRuns:h,fetchCases:w,fetchStats:g,uploadFile:b,setCurrentRun:S,clearError:$,reset:B}});function U(t){try{const e=typeof t=="string"?new Date(t):t;return isNaN(e.getTime())?"Invalid Date":e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}}function z(t){if(t<0||t===0)return"0ms";if(t<1e3)return`${t}ms`;if(t<6e4)return`${(t/1e3).toFixed(2)}s`;const e=Math.floor(t/36e5),a=Math.floor(t%36e5/6e4),n=Math.floor(t%6e4/1e3),r=[];return e>0&&r.push(`${e}h`),a>0&&r.push(`${a}m`),n>0&&r.push(`${n}s`),r.join(" ")}function I(t){return t.toLocaleString("en-US")}function N(t){switch(t.toLowerCase()){case"passed":return"✓";case"failed":return"✗";case"error":return"⚠";case"skipped":return"⊘";default:return"?"}}function O(t){if(t===0)return"0 B";const e=["B","KB","MB","GB","TB"],a=1024,n=Math.floor(Math.log(t)/Math.log(a));return n===0?`${t} ${e[n]}`:`${(t/Math.pow(a,n)).toFixed(2)} ${e[n]}`}function Q(t,e=50){return t.length<=e?t:t.substring(0,e)+"..."}const T=["disabled"],R={key:0,class:"spinner"},M=k({__name:"Button",props:{variant:{default:"primary"},size:{default:"md"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const a=t,n=e,r=f(()=>["btn",`btn-${a.variant}`,`btn-${a.size}`,{"btn-disabled":a.disabled,"btn-loading":a.loading,"btn-full-width":a.fullWidth}]),l=o=>{!a.disabled&&!a.loading&&n("click",o)};return(o,d)=>(p(),v("button",{class:C(r.value),disabled:t.disabled||t.loading,onClick:l},[t.loading?(p(),v("span",R)):F("",!0),D(o.$slots,"default",{},void 0)],10,T))}}),L=E(M,[["__scopeId","data-v-7843903e"]]);export{L as B,z as a,U as b,O as c,I as f,N as g,Q as t,P as u};
